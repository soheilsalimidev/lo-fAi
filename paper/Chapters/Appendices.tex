% !TEX root = ../ui-thesis.tex
% !TeX program = xelatex

\section{دسترسی به کد ها}\label{ap:codes}
می‌توانید کد استفاده شده در این پروژه را در آدرس زیر دسترسی پیدا کنید:

\url{https://github.com/soheilsalimidev/lo-fAi}

برای اجرای مدل می‌توانید از نوت‌ بوک زیر استفاده کنید.

\url{https://colab.research.google.com/drive/1mc6A0XWgNbJECqkoU0uCluzjcSxVfyuY?usp=sharing}

برای اجرای مدل با \lr{pipeline} می‌توانید از نوت‌ بوک زیر استفاده کنید.

\url{https://github.com/soheilsalimidev/lo-fAi/blob/main/packages/pipe/pipe.ipynb}


\section{ پارامترهای آموزش مدل ها}\label{ap:parmas}
\begin{LTR}
  \begin{verbatim}
    cd ./RWKV-LM;
    MODEL_TYPE="x060" # x060 => rwkv-6.0e
    N_LAYER="20"
    N_EMBD="512"
    CTX_LEN="512"
    PROJ_DIR="./"
    M_BSZ="24" 
    LR_INIT="6e-4"
    LR_FINAL="6e-5"
    GRAD_CP=
    EPOCH_SAVE=10
    N_NODE=1
    GPU_PER_NODE=1
    DS_BUCKET_MB=2
    VOCAB_SIZE=2176
    
    python train.py --wandb "li-fAi" --proj_dir $PROJ_DIR --type $MODEL_TYPE \
     --ctx_len $CTX_LEN --epoch_count 999999 --epoch_begin 0 \
     --data_file "text_document" --my_exit_tokens 34234278 --magic_prime 66851 \
     --num_nodes $N_NODE --micro_bsz $M_BSZ --n_layer $N_LAYER \
      --n_embd $N_EMBD --pre_ffn 0 --head_qk 0 \
     --lr_init $LR_INIT --lr_final $LR_FINAL --warmup_steps 10  \
     --beta1 0.9 --beta2 0.99 --adam_eps 1e-8 --data_type "binidx" \
     --vocab_size $VOCAB_SIZE \
     --weight_decay 0.001 --epoch_save $EPOCH_SAVE --head_size_a 64 \
     --accelerator gpu --devices $GPU_PER_NODE --precision bf16 \
      --strategy deepspeed_stage_2 --grad_cp $GRAD_CP \
      --enable_progress_bar True
  \end{verbatim}
\end{LTR}
